<!--  -->

<div class="jumbotron">
  <div class="container">
    <div class="col-md-4">
      <p class="lead">
        <img src=<%="https://robohash.org/#{@user.name}"%> alt="I'm Yeoman"><br>
      </p>
      <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p>
    </div>
    <div class="col-md-8">
      <h1>Welcome to <%=@user.name%>'s profile</h1>
      <h2><%=@user.status %></h2>
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Edit Status</button>
    </div>
  </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel">Editing user ....</h4>
      </div>
      <form id="user-form">
        <div class="modal-body">
          <div class="form-group">
            <label for="recipient-name" class="control-label">Username:</label>
            <input type="text" class="form-control" name="name" value="<%=@user.name%>">
          </div>
          <div class="form-group">
            <label for="message-text" class="control-label">Status:</label>
            <textarea class="form-control" name="status"><%=@user.status%></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="submit" value="SUBMIT" class="btn btn-primary" >Save</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="container">
  <!-- Example row of columns -->
  <div class="row">
    <div class="col-md-4">
      <h2>First post</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn btn-default" href="#" role="button">View details &raquo;</a></p>
    </div>
  </div>
</div>

<script type="text/javascript" language = "javascript">
  $(function(){
    $('#user-form').on('submit', function(e){
        e.preventDefault();
        $.ajax({
            url: <%="#{@user.id}"%>, //this is the submit URL
            type: 'PUT',
            data: $('#user-form').serializeArray(),
            dataType: "json",
            success: function(result){
                 alert('successfully submitted')
                 window.location.reload()
            }
        });
    });
  });
</script>
